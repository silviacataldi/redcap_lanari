(("undefined"!==typeof self?self:this)["webpackJsonpfhir_stats_vue"]=("undefined"!==typeof self?self:this)["webpackJsonpfhir_stats_vue"]||[]).push([[3],{bc13:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-wrapper"},[e("SearchForm"),e("Charts",{staticClass:"mt-2"})],1)},s=[],o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[e("div",{staticClass:"d-flex mb-2"},[e("b-form-datepicker",{attrs:{placeholder:"start date",max:t.toProxy||t.today,"today-button":"","reset-button":"","close-button":""},model:{value:t.fromProxy,callback:function(a){t.fromProxy=a},expression:"fromProxy"}}),e("b-form-datepicker",{staticClass:"ms-2",attrs:{placeholder:"end date",min:t.fromProxy,max:t.today,"today-button":"","reset-button":"","close-button":""},model:{value:t.toProxy,callback:function(a){t.toProxy=a},expression:"toProxy"}})],1),e("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.loading}},[t.loading?e("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:"","fixed-width":""}}):e("font-awesome-icon",{attrs:{icon:["fas","chart-bar"],"fixed-width":""}}),e("span",{staticClass:"ms-2"},[t._v("Display results")])],1),e("b-button",{staticClass:"ms-2",attrs:{type:"reset",variant:"danger"}},[e("font-awesome-icon",{attrs:{icon:["fas","undo"],"fixed-width":""}}),e("span",{staticClass:"ms-2"},[t._v("Reset")])],1)],1)],1)},n=[],i=e("1da1"),l=(e("96cf"),{data:function(){var t=new Date;return{loading:!1,today:t}},computed:{queryParams:function(){return{date_start:this.fromProxy,date_end:this.toProxy}},fromProxy:{get:function(){return this.$route.query.date_start},set:function(t){var a=this.queryParams;a.date_start=t,this.$router.push({query:a})}},toProxy:{get:function(){return this.$route.query.date_end},set:function(t){var a=this.queryParams;a.date_end=t,this.$router.push({query:a})}}},methods:{onSubmit:function(t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),a.loading=!0,e.next=4,a.$store.dispatch("stats/getStats",{from:a.fromProxy,to:a.toProxy,vm:a});case 4:a.loading=!1;case 5:case"end":return e.stop()}}),e)})))()},onReset:function(){this.fromProxy=this.toProxy=null}}}),c=l,u=e("2877"),d=Object(u["a"])(c,o,n,!1,null,null,null),h=d.exports,f=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}]},[e("b-tabs",{attrs:{"content-class":"mt-3"},scopedSlots:t._u([{key:"tabs-end",fn:function(){return[e("div",{staticClass:"ml-auto"})]},proxy:!0}])},[e("b-tab",{attrs:{title:"Overall",active:""}},[e("TotalChart",{attrs:{chartdata:t.overall_total}}),e("DailyChart",{attrs:{chartdata:t.overall_daily}})],1),e("b-tab",{attrs:{title:"Clinical Data Mart"}},[e("TotalChart",{attrs:{chartdata:t.CDM_total}}),e("DailyChart",{attrs:{chartdata:t.CDM_daily}})],1),e("b-tab",{attrs:{title:"Clinical Data Pull"}},[e("TotalChart",{attrs:{chartdata:t.CDP_total}}),e("DailyChart",{attrs:{chartdata:t.CDP_daily}})],1),e("b-tab",{attrs:{title:"Clinical Data Pull (instant adjudication)"}},[e("TotalChart",{attrs:{chartdata:t.CDP_I_total}}),e("DailyChart",{attrs:{chartdata:t.CDP_I_daily}})],1)],1),e("b-button",{staticClass:"mt-2 text-white",attrs:{size:"sm",href:t.metadata.export_link,download:""}},[t.loading?e("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:"","fixed-width":""}}):e("font-awesome-icon",{attrs:{icon:["fas","file-archive"],"fixed-width":""}}),e("span",{staticClass:"ms-2"},[t._v("Export CSV")])],1)],1)},m=[],p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("canvas",{ref:"chart"})])},b=[],y=e("2909"),C=e("9b4a");C["a"].register.apply(C["a"],Object(y["a"])(C["b"]));var v={data:function(){return{chart:null}},computed:{},methods:{makeChart:function(){var t=this.$refs["chart"];if(t)return this.chart&&this.chart.destroy(),this.chart=new C["a"](t,{type:"bar",data:this.chartdata,options:{responsive:!0,plugins:{title:{display:!0,text:"Total entries"}},interaction:{intersect:!1,mode:"dataset"},x:{title:{display:!0,text:"Day"}},y:{title:{display:!0,text:"Entries"}}}}),this.chart}},props:{chartdata:{type:Object,default:null},options:{type:Object,default:function(){return{responsive:!0,maintainAspectRatio:!1}}}},watch:{chartdata:{immediate:!0,deep:!0,handler:function(){this.makeChart()}}}},_=v,D=Object(u["a"])(_,p,b,!1,null,null,null),x=D.exports,k=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("canvas",{ref:"chart"})])},P=[],g=e("5530");e("d81d");C["a"].register.apply(C["a"],Object(y["a"])(C["b"]));var j={data:function(){return{chart:null}},computed:{data:function(){var t={borderWidth:1,fill:!1,cubicInterpolationMode:"monotone",tension:.4},a=Object(g["a"])({},this.chartdata),e=a.labels,r=a.datasets;return r=r.map((function(a){return Object(g["a"])(Object(g["a"])({},t),a)})),{labels:e,datasets:r}}},methods:{makeChart:function(){var t=this.$refs["chart"];if(t)return this.chart&&this.chart.destroy(),this.chart=new C["a"](t,{type:"line",data:this.data,options:{responsive:!0,plugins:{title:{display:!0,text:"Entries per day"}},interaction:{intersect:!1,mode:"x"},scales:{x:{title:{display:!0,text:"Day"}},y:{title:{display:!0,text:"Entries"}}}}}),this.chart}},props:{chartdata:{type:Object,default:null},options:{type:Object,default:function(){return{responsive:!0,maintainAspectRatio:!1}}}},watch:{chartdata:{immediate:!0,deep:!0,handler:function(){this.makeChart()}}}},w=j,O=Object(u["a"])(w,k,P,!1,null,null,null),$=O.exports,M=e("3835"),T=e("ade3"),E=e("d4ec"),q=e("bee2"),R=(e("99af"),e("a15b"),e("07ac"),e("b64b"),e("4fad"),{red_alt1:[255,99,132],blue_alt1:[54,162,235],yellow_alt1:[255,206,86],green_alt1:[75,192,192],purple_alt1:[153,102,255],orange_alt1:[255,159,64],teal_alt1:[32,201,151],cyan_alt1:[23,162,184],lime:[0,255,0],aqua:[0,255,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],silver:[192,192,192],blue:[0,0,255],fuchsia:[255,0,255],green:[0,128,0],teal:[0,128,128],purple:[128,0,128],gray:[128,128,128],red:[255,0,0],yellow:[255,255,0],black:[0,0,0],white:[255,255,255]}),I=function(){function t(){Object(E["a"])(this,t)}return Object(q["a"])(t,[{key:"makeCssColor",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a=parseFloat(a),"rgba(".concat(t.join(", "),", ").concat(a,")")}},{key:"makeCssColors",value:function(t){var a=this,e=function(e){return a.makeCssColor(e,t)};return Object.values(R).map(e)}},{key:"getRandomColor",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;a=parseFloat(a),t+=1;var e=200,r=Math.round(t*Math.random()*200)%e,s=Math.round(t*Math.random()*200)%e,o=Math.round(t*Math.random()*200)%e,n=[r,s,o,a].join(", ");return"rgba("+n+")"}}]),t}(),S=function t(){var a=this;Object(E["a"])(this,t),Object(T["a"])(this,"makeTotalChartData",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={labels:Object.keys(t),datasets:[{data:t,label:e,backgroundColor:a.colorMaker.makeCssColors(.2),borderColor:a.colorMaker.makeCssColors(1),borderWidth:1}]};return r})),Object(T["a"])(this,"makeDailyChartData",(function(t){for(var e=function(t){for(var a={},e=0,r=Object.values(t);e<r.length;e++)for(var s=r[e],o=0,n=Object.entries(s);o<n.length;o++){var i=Object(M["a"])(n[o],2),l=i[0],c=i[1];a[l]||(a[l]=[]),a[l].push(c)}return a},r=e(t),s=Object.keys(t),o=[],n=0,i=a.colorMaker.makeCssColors(.2),l=a.colorMaker.makeCssColors(1),c=0,u=Object.entries(r);c<u.length;c++){var d=Object(M["a"])(u[c],2),h=d[0],f=d[1],m=n++,p={label:h,backgroundColor:i[m],borderColor:l[m],fill:!1,data:f};o.push(p)}var b={labels:s,datasets:o};return b})),this.colorMaker=new I},F=new S,A={components:{TotalChart:x,DailyChart:$},data:function(){return{loading:!1}},computed:{loaded:function(){return this.$store.state.stats.loaded},overall_total:function(){return F.makeTotalChartData(this.$store.state.stats.overall_total,"Overall total")},CDM_total:function(){return F.makeTotalChartData(this.$store.state.stats.CDM_total,"CDM total")},CDP_total:function(){return F.makeTotalChartData(this.$store.state.stats.CDP_total,"CDP total")},CDP_I_total:function(){return F.makeTotalChartData(this.$store.state.stats.CDP_I_total,"CDP instant adjudication total")},overall_daily:function(){return F.makeDailyChartData(this.$store.state.stats.overall_daily)},CDM_daily:function(){return F.makeDailyChartData(this.$store.state.stats.CDM_daily)},CDP_daily:function(){return F.makeDailyChartData(this.$store.state.stats.CDP_daily)},CDP_I_daily:function(){return F.makeDailyChartData(this.$store.state.stats.CDP_I_daily)},cdm_users_count:function(){return this.$store.state.stats.cdm_users_count},date_from:function(){return this.$store.state.stats.date_from},date_to:function(){return this.$store.state.stats.date_to},metadata:function(){return this.$store.state.stats.metadata}},methods:{}},J=A,W=Object(u["a"])(J,f,m,!1,null,null,null),z=W.exports,H={name:"HomePage",components:{SearchForm:h,Charts:z},methods:{},computed:{}},N=H,V=Object(u["a"])(N,r,s,!1,null,"3ece3310",null);a["default"]=V.exports}}]);